"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[742],{7181:function(e,t,n){n.d(t,{Z:function(){return a}});var s=n(2791),c=n(184),r=function(e){var t=e.onClick,n=void 0===t?function(){}:t,r=e.children,a=e.className,i=void 0===a?"":a,o=e.rippleClass,u=void 0===o?"origin":o,d=e.ripple,l=void 0===d||d,m=(0,s.useRef)();return(0,c.jsx)("button",{ref:m,onClick:n,onMouseDown:function(e){return function(e){if(l){e.stopPropagation();var t=document.createElement("span");e.target.addEventListener("mouseup",(function(){t.style.opacity="0",t.addEventListener("transitionend",(function(){t.remove()}))})),e.target.addEventListener("mouseout",(function(){t.style.opacity="0",t.addEventListener("transitionend",(function(){t.remove()}))})),e.target.appendChild(t);var n=Math.max(e.target.clientWidth,e.target.clientHeight),s=n/2;t.style.width=t.style.height="".concat(n,"px"),t.style.left="".concat(e.clientX-s-m.current.getBoundingClientRect().left,"px"),t.style.top="".concat(e.clientY-s-m.current.getBoundingClientRect().top,"px"),t.classList.add("ripple"),t.classList.add(u)}}(e)},className:"Button2 ".concat(i),children:(0,c.jsx)("span",{className:"content",children:r})})},a=(0,s.memo)(r)},847:function(e,t,n){n.d(t,{Z:function(){return c}});n(2791);var s=n(184),c=function(e){var t=e.children,n=e.navigationClass,c=void 0===n?"origin":n;return(0,s.jsx)("div",{className:"Navigation ".concat(c),children:t})}},9742:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var s=n(5338),c=n(847),r=n(2791),a=n(4122),i=n(187),o=n(9439),u=n(1413),d=n(4165),l=n(4942),m=n(3433),f=n(7762),v=n(5861),p=n(7563),h=n(4397),_=n(1731),k=n(9934),x=n(9179),b=n(8079),j=n(184),g=function(e){var t=e.value,n=void 0===t?0:t,s=e.change,c=e.classAmount,r=void 0===c?"origin":c,a=e.max,i=void 0===a?1e3:a,o=e.min,u=void 0===o?1:o;return(0,j.jsxs)("div",{className:"Amount ".concat(r),children:[(0,j.jsx)("div",{onClick:function(){return function(e){var t=Math.min(i,e+1);s(t)}(n)},className:"Amount__change _plus"}),(0,j.jsx)("div",{className:"Amount__number",children:n}),(0,j.jsx)("div",{onClick:function(){return function(e){var t=Math.max(u,e-1);s(t)}(n)},className:"Amount__change _minus"})]})},N=function(e){var t=e.e,n=(e.products,e.basketId),s=(0,r.useState)(0),c=(0,o.Z)(s,2),l=c[0],m=c[1],f=(0,a.C)((function(e){return e.reducer.basket})).sumPrice,h=(i.C.actions.setSumPrice,(0,a.T)());(0,r.useEffect)((function(){m(t.count),console.log(t.product.price,f)}),[]);var _=function(e,t){h(function(e,t,n){return function(){var s=(0,v.Z)((0,d.Z)().mark((function s(c){var r,a,o;return(0,d.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r=x.h.getState(),a=r.reducer.basket.sumPrice,o=i.C.actions.setSumPrice;try{c(o(a-n*e.product.price+t*e.product.price)),(0,p.Yv)({id:e._id,count:t}).then((function(e){console.log(e)}))}catch(u){console.log(u)}case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}(e,t,l)),m(t)};return(0,j.jsxs)("div",{className:"items-basket__product",children:[(0,j.jsx)("div",{className:"items-basket__image-flex",children:(0,j.jsx)("div",{className:"items-basket__image-cover",children:(0,j.jsx)("div",{className:"items-basket__image",children:(0,j.jsx)("img",{src:"".concat(b.T5,"/").concat(t.product.name,"/").concat(JSON.parse(t.product.images)[0]),alt:""})})})}),(0,j.jsxs)("div",{className:"items-basket__info",children:[(0,j.jsx)("div",{className:"items-basket__name",children:t.product.name}),(0,j.jsx)("div",{className:"items-basket__brand",children:t.product.brand.name})]}),(0,j.jsxs)("div",{className:"items-basket__price",children:[t.product.price," \u0420"]}),(0,j.jsx)("div",{className:"items-basket__amount amount-basket",children:(0,j.jsx)(g,{value:l,change:function(e){return _(t,e)},classAmount:"basket"})}),(0,j.jsxs)("div",{className:"items-basket__total",children:[t.product.price*l," \u0420"]}),(0,j.jsx)("div",{onClick:function(){h(function(e,t,n){return function(){var s=(0,v.Z)((0,d.Z)().mark((function s(c){var r,a,o,l,m,f,v,h;return(0,d.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r=x.h.getState(),a=r.reducer.basket.sumPrice,o=r.reducer.navbar,l=r.reducer.basket.basket,m=i.C.actions,f=m.setSumPrice,v=m.setBasket,h=k.P.actions;try{c(v((0,u.Z)((0,u.Z)({},l),{},{basketItems:l.basketItems.filter((function(t){return t._id!==e._id}))}))),c(f(a-e.product.price*t)),c(h.setProducts(o.products-1)),(0,p.ff)({id:e.product._id,basketId:n}).then((function(e){console.log(e)}))}catch(d){console.log(d)}case 7:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}(t,l,n))},className:"items-basket__delete _icon-delete"})]})},Z=function(){var e=(0,a.C)((function(e){return e.reducer.catalog})).user,t=(0,a.C)((function(e){return e.reducer.basket})).basket,n=i.C.actions.setSumPrice,s=(0,a.T)();return(0,r.useEffect)((function(){var e=t.basketItems.reduce((function(e,t){var n;return(null===t||void 0===t||null===(n=t.product)||void 0===n?void 0:n.price)*t.count+e}),0);s(n(e))}),[]),(0,j.jsx)("div",{className:"items-basket__body",children:t.basketItems.map((function(n){return(0,j.jsx)(N,{e:n,products:t,basketId:e.basket},n._id)}))})},y=n(7181),C="bottomItems_totalPriceBasket__uCl+B",I="bottomItems_left__v2rJx",P="bottomItems_right__NoVNL",w="bottomItems_buttonCart__qo8yX",B="bottomItems_bottom__DDumw",S="bottomItems_submit__z5Akx",E=function(){var e=(0,a.C)((function(e){return e.reducer.basket})).sumPrice,t=(0,a.T)();return(0,j.jsxs)("div",{className:B,children:[(0,j.jsx)("div",{className:S,children:(0,j.jsx)(y.Z,{onClick:function(){return t(function(){var e=(0,v.Z)((0,d.Z)().mark((function e(t){var n,s,c,r,a,i;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=x.h.getState(),s=n.reducer.catalog.user,c=n.reducer.basket,r=c.sumPrice,a=c.products,i=k.P.actions.setProducts;try{t(i(0)),(0,p.fk)({id:s.id}).then((function(e){var t,n=[],c=(0,f.Z)(e.basketItems);try{for(c.s();!(t=c.n()).done;){var a=t.value;n=[].concat((0,m.Z)(n),[(0,l.Z)({},a.product._id,a.count)])}}catch(i){c.e(i)}finally{c.f()}(0,p.fS)({ordersId:s.orders,price:r,products:JSON.stringify(n)}).then((function(e){console.log(e)}))})).then((function(e){var t,n=(0,f.Z)(a);try{for(n.s();!(t=n.n()).done;){var s=t.value;(0,h.m)({id:Object.keys(s)[0],purchase:1}).then((function(e){console.log(e,"---------------")}))}}catch(c){n.e(c)}finally{n.f()}})).then((function(){(0,p.xY)({id:s.basket}).then((function(e){console.log(e,"7777")})),window.location.replace(_.ef)}))}catch(o){console.log(o)}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},className:w,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})}),(0,j.jsxs)("div",{className:C,children:[(0,j.jsx)("div",{className:I,children:"\u0418\u0442\u043e\u0433\u043e:"}),(0,j.jsxs)("div",{className:P,children:[e," \u0420"]})]})]})},L=["\u0424\u043e\u0442\u043e","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","\u0426\u0435\u043d\u0430","\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e","\u0418\u0442\u043e\u0433\u043e"],A=function(){return(0,j.jsx)("div",{className:"items-basket__top top-basket",children:L.map((function(e){return(0,j.jsx)("div",{className:"top-basket__item",children:e},e)}))})},T=function(){return(0,j.jsxs)("div",{className:"Basket__items items-basket",children:[(0,j.jsx)(A,{}),(0,j.jsx)(Z,{}),(0,j.jsx)(E,{})]})},M=function(){return(0,j.jsxs)("div",{className:"Basket__topic",children:[(0,j.jsx)("div",{className:"Basket__title",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),(0,j.jsx)(T,{})]})},D=n(77),J=function(){var e=(0,a.C)((function(e){return e.reducer.basket})),t=e.basket,n=e.load,s=(0,a.T)();return(0,r.useEffect)((function(){s(function(){var e=(0,v.Z)((0,d.Z)().mark((function e(t){var n,s,c,r,a,o,u,v,h,_,k;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.h.getState(),s=n.reducer.catalog.user,c=i.C.actions,r=c.setProducts,a=c.setBasket,o=c.setLoad,e.prev=3,t(o(!0)),e.next=7,(0,p.fk)({id:s.id});case 7:u=e.sent,t(a(u)),v=[],h=(0,f.Z)(u.basketItems);try{for(h.s();!(_=h.n()).done;)k=_.value,v=[].concat((0,m.Z)(v),[(0,l.Z)({},k.product._id,k.count)])}catch(d){h.e(d)}finally{h.f()}t(r(v)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0);case 18:return e.prev=18,t(o(!1)),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}())}),[]),(0,j.jsx)(j.Fragment,{children:n?(0,j.jsx)(D.Z,{}):t&&0!==t.basketItems.length?(0,j.jsx)(M,{}):(0,j.jsx)("div",{className:"Basket__none _icon-cart",children:"\u043d\u0435\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"})})},O=function(){return(0,j.jsx)("div",{className:"Basket",children:(0,j.jsx)("div",{className:"Basket__container",children:(0,j.jsxs)("div",{className:"Basket__body",children:[(0,j.jsx)(c.Z,{navigationClass:"basket",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f / \u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),(0,j.jsx)(J,{})]})})})},R=function(){return(0,j.jsx)(s.Z,{children:(0,j.jsx)(O,{})})}}}]);
//# sourceMappingURL=742.6610addb.chunk.js.map