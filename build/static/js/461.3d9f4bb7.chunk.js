"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[461],{1774:function(e,r,t){t.d(r,{Z:function(){return i}});var n=t(2791),c=t(184),i=function(e){var r=e.value,t=e.foldActive,i=void 0===t?function(){}:t,a=(e.foldChange,e.children),o=e.slice,s=void 0===o?1:o,u=e.foldClass,l=void 0===u?"origin":u,p=(0,n.useRef)(null);(0,n.useEffect)((function(){var e=[].slice.call(p.current.children);if(console.log(e.length,"pppp"),p.current&&e.length>s&&!r){e.slice(s,e.length).forEach((function(e){e.style.display="none"}));var t=0;e.slice(0,s).forEach((function(e){t+=e.offsetHeight})),p.current.style.height="".concat(t,"px")}else i(!1)}),[]),(0,n.useEffect)((function(){var e=[].slice.call(p.current.children);if(p.current&&e.length>s)if(r){var t=0;console.log(p.current,"ty"),e.slice(0,s).forEach((function(e){t+=e.offsetHeight})),p.current.style.height="".concat(t,"px"),e.slice(s,e.length).forEach((function(e){e.style.display="inherit"})),p.current.style.height="".concat(p.current.scrollHeight,"px"),setTimeout((function(){p.current&&(p.current.style.height="auto")}),300)}else{var n=0;p.current.style.height="".concat(p.current.scrollHeight,"px"),e.slice(0,s).forEach((function(e){n+=e.offsetHeight})),p.current.style.height="".concat(n,"px"),setTimeout((function(){e.slice(s,e.length).forEach((function(e){e.style.display="none"})),p.current&&(p.current.style.height="auto")}),300)}}),[r]);return(0,c.jsx)("div",{className:"Fold ".concat(l),children:(0,c.jsx)("div",{ref:p,className:"Fold__body",children:a.slice(0,a.length).map((function(e,r){return(0,c.jsx)("div",{className:"Fold__item",children:e},r)}))})})}},847:function(e,r,t){t.d(r,{Z:function(){return c}});t(2791);var n=t(184),c=function(e){var r=e.children,t=e.navigationClass,c=void 0===t?"origin":t;return(0,n.jsx)("div",{className:"Navigation ".concat(c),children:r})}},3791:function(e,r,t){t.r(r),t.d(r,{default:function(){return q}});t(4676),t(4831),t(4432),t(3100);var n=t(5338),c=t(9439),i=t(2791),a=t(4122),o=t(3433),s=t(4165),u=t(5861),l=t(8028),p=t(8770),m=t(6898),d=t(9934),f=t(9179),h=function(){return function(){var e=(0,u.Z)((0,s.Z)().mark((function e(r){var t,n,c,i,a,o,u,h;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f.h.getState(),n=t.reducer.catalog,c=n.user,n.compare,i=t.reducer.compare.activeType,a=d.P.actions,o=m.q.actions,o.setCompareTypes,o.setActiveType,o.setInformations,u=o.setActiveTypeLoad,h=p.G.actions.setCompare;try{(0,l.iL)({type:i,compareId:c.compare}).then((function(e){r(a.setCompare(e.compareItems.length)),r(h(e.compareItems)),r(u(!1))}))}catch(s){console.log(s)}case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},v=t(184),_=function(){var e=(0,a.T)();return(0,v.jsxs)("div",{className:"main-compare__top-left",children:[(0,v.jsx)("div",{onClick:function(){return e(h())},className:"main-compare__clear _icon-delete",children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}),(0,v.jsx)("div",{className:"main-compare__item",children:"\u041c\u043e\u0434\u0435\u043b\u044c \u0424\u043e\u0442\u043e\u0430\u043f\u043f\u0430\u0440\u0430\u0442\u0430"})]})},x=t(6899),g=t(7586),j=t(8079),w={786:{spaceBetween:55,slidesPerView:3},982:{spaceBetween:50,slidesPerView:4},1213:{slidesPerView:4,spaceBetween:118}},y=function(e){var r=e.setFirstSwiper,t=e.secondSwiper,n=(0,a.C)((function(e){return e.reducer.compare})).activeType,c=(0,a.C)((function(e){return e.reducer.catalog})),i=c.user,m=c.compare,h=(0,a.T)();return(0,v.jsx)("div",{className:"main-compare__top-slider",children:(0,v.jsx)("div",{className:"main-compare__top-slider-cover",children:(0,v.jsx)(g.tq,{slidesPerView:2,spaceBetween:0,className:"swiperCompare",modules:[x.Qr],onSwiper:function(e){return r(e)},controller:{control:t},breakpoints:w,children:m.map((function(e){if(e.product.type.name===n)return(0,v.jsx)(g.o5,{children:(0,v.jsxs)("div",{className:"swiperCompare__item item-swiperCompare",children:[(0,v.jsx)("div",{className:"item-swiperCompare__image-cover",children:(0,v.jsx)("div",{className:"item-swiperCompare__image",children:(0,v.jsx)("img",{src:"".concat(j.T5,"/").concat(e.product.name,"/").concat(JSON.parse(e.product.images)[0]),alt:""})})}),(0,v.jsx)("div",{onClick:function(){return h((r=e.product._id,t=i.compare,function(){var e=(0,u.Z)((0,s.Z)().mark((function e(n){var c,i,a,u,m;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=f.h.getState(),i=c.reducer.catalog.compare,a=c.reducer.navbar,u=p.G.actions.setCompare,m=d.P.actions;try{n(u((0,o.Z)(i.filter((function(e){return e.product._id!==r}))))),n(m.setCompare(a.compare-1)),(0,l.dH)({id:r,compareId:t}).then((function(e){console.log(e)}))}catch(s){console.log(s)}case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));var r,t},className:"item-swiperCompare__delete"}),(0,v.jsx)("div",{className:"item-swiperCompare__name",children:e.product.name}),(0,v.jsx)("div",{className:"item-swiperCompare__brand",children:e.product.brand.name})]})},e._id)}))})})})},C=function(e){var r=e.setFirstSwiper,t=e.secondSwiper;return(0,v.jsxs)("div",{className:"main-compare__top",children:[(0,v.jsx)(_,{}),(0,v.jsx)(y,{setFirstSwiper:r,secondSwiper:t})]})},N=t(1774),Z=function(e){var r=e.setSecondSwiper,t=e.firstSwiper,n=(0,a.C)((function(e){return e.reducer.catalog})).compare,c=(0,a.C)((function(e){return e.reducer.compare})),i=c.activeType,o=c.fold,s=c.informations,u=m.q.actions.setFold,l=(0,a.T)();return(0,v.jsxs)("div",{className:"main-compare__bottom",children:[(0,v.jsx)("div",{className:"main-compare__bottom-left",children:(0,v.jsx)(N.Z,{value:o,foldChange:function(e){return l(u(e))},slice:2,children:s.map((function(e){return(0,v.jsx)("div",{className:"main-compare__bottom-left__item",children:e.name},e._id)}))})}),(0,v.jsx)("div",{className:"item-swiperCompare__bottom-right",children:(0,v.jsx)(g.tq,{slidesPerView:2,className:"swiperCompare2",spaceBetween:9,modules:[x.Qr],onSwiper:function(e){return r(e)},controller:{control:t},breakpoints:{786:{spaceBetween:55,slidesPerView:3},982:{spaceBetween:55,slidesPerView:4},1213:{slidesPerView:4,spaceBetween:120}},children:n.map((function(e){if(e.product.type.name===i)return(0,v.jsx)(g.o5,{children:(0,v.jsx)("div",{className:"swiperCompare2__item item-swiperCompare2",children:(0,v.jsx)(N.Z,{foldClass:"ggg",value:o,foldChange:function(e){return l(u(e))},slice:2,children:e.product.information.map((function(e){return(0,v.jsx)("div",{className:"item-swiperCompare2__item",children:e.description},e.description)}))})})},e._id)}))})})]})},S=t(4297),T=function(){var e=(0,a.C)((function(e){return e.reducer.compare})).fold,r=m.q.actions.setFold,t=(0,a.T)();return(0,v.jsx)("div",{className:"main-compare__button",children:(0,v.jsx)(S.Z,{onClick:function(){return t(r(!e))},className:"compare g",children:e?"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"})})},k=function(e){var r=e.actionRef,t=e.actionRef2,n=e.setitemsView;(0,i.useEffect)((function(){return document.addEventListener("click",c),function(){document.removeEventListener("click",c)}}),[]);var c=(0,i.useCallback)((function(e){r.current&&t.current&&(t.current.contains(e.target)||e.target===r.current||n(!1))}),[])},b=function(){var e=(0,a.C)((function(e){return e.reducer.compare})),r=e.activeType,t=e.compareTypes,n=(0,a.C)((function(e){return e.reducer.catalog})).compare,o=(0,a.T)(),l=(0,i.useRef)(null),p=(0,i.useRef)(null),d=(0,i.useState)(!1),_=(0,c.Z)(d,2),x=_[0],g=_[1];return k({actionRef:l,actionRef2:p,setitemsView:g}),(0,v.jsxs)("div",{className:"Compare__items items-compare",children:[(0,v.jsx)("div",{ref:p,className:"items-compare__cover",onClick:function(){return g((function(e){return!e}))},children:(0,v.jsxs)("div",{className:x?"items-compare__action active":"items-compare__action",children:[" ",(0,v.jsx)("span",{})]})}),(0,v.jsx)("div",{onClick:function(){return o(h())},className:"items-compare__delete _icon-delete"}),(0,v.jsx)("div",{ref:l,className:x?"items-compare__body active":"items-compare__body",children:t.map((function(e){return(0,v.jsxs)("div",{onClick:function(){return o(function(e){return function(){var r=(0,u.Z)((0,s.Z)().mark((function r(t){var n,c,i,a,o,u;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=f.h.getState(),c=n.reducer.catalog.compare,i=m.q.actions,a=i.setActiveType,o=i.setInformations,t(a(e)),(u=c.find((function(r){return r.product.type.name===e})))&&t(o(u.product.information));case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(e))},className:r===e?"items-compare__item active":"items-compare__item",children:[e," (",n.filter((function(r){return r.product.type.name===e})).length,")"]},e)}))})]})},E=function(){var e=(0,a.C)((function(e){return e.reducer.catalog})),r=(e.user,e.compare),t=(0,i.useState)(null),n=(0,c.Z)(t,2),o=n[0],s=n[1],u=(0,i.useState)(null),l=(0,c.Z)(u,2),p=l[0],m=l[1];return(0,v.jsxs)("div",{className:"Compare__topic",children:[(0,v.jsxs)("div",{className:"Compare__title",children:["\u0421\u0420\u0410\u0412\u041d\u0418\u0422\u042c ",(0,v.jsxs)("span",{children:[r.length," \u0422\u041e\u0412\u0410\u0420\u041e\u0412"]})]}),(0,v.jsx)(b,{}),(0,v.jsxs)("div",{className:"Compare__main main-compare",children:[(0,v.jsx)(C,{setFirstSwiper:s,secondSwiper:p}),(0,v.jsx)(Z,{setSecondSwiper:m,firstSwiper:o}),(0,v.jsx)(T,{})]})]})},P=t(847),I=t(77),V=function(){var e=(0,a.C)((function(e){return e.reducer.catalog})).compare,r=(0,a.C)((function(e){return e.reducer.compare})),t=r.activeType,n=r.load,o=m.q.actions.setActiveTypeLoad,h=(0,a.T)(),_=(0,i.useState)(!1),x=(0,c.Z)(_,2);x[0],x[1];return(0,i.useEffect)((function(){h(function(){var e=(0,u.Z)((0,s.Z)().mark((function e(r){var t,n,c,i,a,o,u,h,v,_,x;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.h.getState(),n=t.reducer.catalog.user,t.reducer.compare.load,(c=t.reducer.basket).sumPrice,c.products,d.P.actions.setProducts,i=m.q.actions,a=i.setCompareTypes,o=i.setActiveType,u=i.setInformations,h=i.setLoad,v=p.G.actions.setCompare,e.prev=7,r(h(!0)),e.next=11,(0,l._$)({id:n.compare});case 11:_=e.sent,r(v(_.compareItems)),x=[],_.compareItems.forEach((function(e){x.includes(e.product.type.name)||x.push(e.product.type.name),r(a(x)),r(o(x[0])),r(u(_.compareItems.find((function(e){return e.product.type.name===x[0]})).product.information))})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),console.log(e.t0);case 20:return e.prev=20,r(h(!1)),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[7,17,20,23]])})));return function(r){return e.apply(this,arguments)}}())}),[]),(0,i.useEffect)((function(){h(function(){var e=(0,u.Z)((0,s.Z)().mark((function e(r){var t,n,c,i,a,o,u,l,h,v,_;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f.h.getState(),(n=t.reducer.catalog).user,c=n.compare,i=t.reducer.compare.activeType,d.P.actions.setProducts,a=m.q.actions,o=a.setCompareTypes,u=a.setActiveType,l=a.setInformations,h=a.setActiveTypeLoad,p.G.actions.setCompare;try{r(h(!1)),v=[],c.forEach((function(e){v.includes(e.product.type.name)||v.push(e.product.type.name)})),r(o(v)),0===v.length?r(u("\u0422\u0438\u043f\u044b")):c.find((function(e){return e.product.type.name===i}))||(r(u(v[0])),(_=c.find((function(e){return e.product.type.name===v[0]})))&&r(l(_.product.information)))}catch(s){console.log(s)}case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())}),[e]),(0,i.useEffect)((function(){"\u0422\u0438\u043f\u044b"!==t&&h(o(!0))}),[t]),(0,v.jsx)("div",{className:"Compare",children:(0,v.jsx)("div",{className:"Compare__container",children:(0,v.jsxs)("div",{className:"Compare__body",children:[(0,v.jsx)(P.Z,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f / \u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"}),n?(0,v.jsx)(I.Z,{}):e&&0!==e.length?(0,v.jsx)(E,{}):(0,v.jsx)("div",{className:"Compare__none _icon-compare",children:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b \u0442\u043e\u0432\u0430\u0440\u044b"})]})})})},q=function(){return(0,v.jsx)(n.Z,{children:(0,v.jsx)(V,{})})}},4831:function(){},3100:function(){},3366:function(e,r,t){function n(e,r){if(null==e)return{};var t,n,c={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(c[t]=e[t]);return c}t.d(r,{Z:function(){return n}})}}]);
//# sourceMappingURL=461.3d9f4bb7.chunk.js.map