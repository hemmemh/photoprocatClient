"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[357],{7788:(e,s,t)=>{t.d(s,{Z:()=>i});var a=t(2791),n=t(184);const i=e=>{let{value:s,setValue:t,placeholder:i="",className:l=""}=e;const c=(0,a.useRef)(null),[r,o]=(0,a.useState)(!1);return(0,n.jsx)("textarea",{ref:c,rows:1,onFocus:()=>{o(!0)},onBlur:()=>{o(!1)},className:"MyTextArea ".concat(l," ").concat(r?"active":""),value:s,onChange:e=>{c.current&&(c.current.style.height="auto"),c.current&&(c.current.style.height="".concat(e.target.scrollHeight,"px")),t(e.target.value)},placeholder:i})}},847:(e,s,t)=>{t.d(s,{Z:()=>n});t(2791);var a=t(184);const n=e=>{let{children:s,navigationClass:t="origin"}=e;return(0,a.jsx)("div",{className:"Navigation ".concat(t),children:s})}},3357:(e,s,t)=>{t.r(s),t.d(s,{default:()=>S});var a=t(5338),n=t(2791),i=t(7475);var l=t(7204),c=t(8079),r=t(184);const o=e=>{let{breakpoint:s=8e3,children:t,oneOpen:a=!1,setVisibleAccordion:i,accordionClass:l="origin"}=e;const[c,o]=(0,n.useState)(!1),[d,m]=(0,n.useState)(null),u=(0,n.useRef)(),x=((0,n.useRef)(),(0,n.useRef)(),(0,n.useRef)([]),(0,n.useRef)()),h=(0,n.useCallback)((()=>{const e=window.innerWidth;o(!(e<=s))}),[]);(0,n.useEffect)((()=>{const e=window.innerWidth;return o(!(e<=s)),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}}),[]);const[v,_]=(0,n.useState)(null),[w,g]=(0,n.useState)(null);(0,n.useEffect)((()=>(u.current.style.height="0px",window.addEventListener("resize",N),()=>{window.removeEventListener("resize",N)})),[]);const N=()=>{};(0,n.useEffect)((()=>{c?(u.current.style.height="".concat(u.current.scrollHeight,"px"),setTimeout((()=>{u.current.style.height="auto"}),300)):(console.log("777777",c),u.current.style.height="".concat(u.current.scrollHeight,"px"),setTimeout((()=>{u.current.style.height="0px"}),5))}),[c]);return(0,r.jsx)("div",{ref:x,className:"AccordionOne ".concat(l),children:(0,r.jsxs)("div",{className:"AccordionOne__bodyCover",onTransitionEnd:()=>{},children:[(0,r.jsx)("div",{onClick:()=>o((e=>!e)),className:c?"AccordionOne__button  active _icon-arrow-next active":"AccordionOne__button _icon-arrow-next",children:t[0]}),(0,r.jsx)("div",{onClick:()=>{},ref:u,className:"AccordionOne__body",children:(0,r.jsx)("div",{className:"AccordionOne__bodytwo",children:t[1]})})]})})};var d=t(3286),m=t(4122),u=t(9846),x=t(1528),h=t(7181);const v=()=>{const[e,s]=(0,n.useState)(!1),{setNewsId:t,setModalCooment:a,setNews:v}=l.newsSlice.actions,_=(0,m.T)(),{news:w}=(0,m.C)((e=>e.reducer.news));(0,n.useEffect)((()=>{(async()=>{const{data:e}=await i.y.post("news/getAll");return e})().then((e=>{_(v(e)),s(!0)}))}),[]);return(0,r.jsx)("div",{className:"News__main main-news",children:e?w.map((e=>{const s=(0,u.Z)(+e.date,"d MMMM yyyy",{locale:x.Z});return(0,r.jsxs)("div",{className:"main-news__new new-main",children:[(0,r.jsx)("div",{className:"new-main__image",children:(0,r.jsx)("img",{src:"".concat(c.T5,"/news/").concat(e.image),alt:""})}),(0,r.jsx)("div",{className:"new-main__date",children:s}),(0,r.jsx)("div",{className:"new-main__name",children:e.title}),(0,r.jsx)("div",{className:"new-main__text",children:e.text}),(0,r.jsx)("div",{className:"new-main__button",children:(0,r.jsx)(h.Z,{onClick:()=>{return s=e._id,_(a(!0)),void _(t(s));var s},className:"buttonCart",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 "})}),(0,r.jsx)("div",{className:"new-main__cooments comments-main",children:(0,r.jsxs)(o,{accordionClass:"news",children:[(0,r.jsxs)("div",{className:"comments-main__value",children:[e.comments.length," \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"]}),(0,r.jsx)("div",{className:"comments-main__body",children:e.comments.map((e=>(0,r.jsxs)("div",{className:"comments-main__item",children:[(0,r.jsxs)("div",{className:"comments-main__name",children:[e.name," ",e.sername]}),(0,r.jsx)("div",{className:"comments-main__text",children:e.text})]},e._id)))})]})})]},e.title)})):(0,r.jsx)(d.Z,{})})},_=()=>(0,r.jsx)("div",{className:"News__body",children:(0,r.jsx)(v,{})});var w=t(8657),g=t(8773),N=t(7689);const j=()=>{const[e,s]=(0,n.useState)(null),[t,a]=(0,n.useState)(""),[c,r]=(0,n.useState)(!1),[o,d]=(0,n.useState)(null),[u,x]=(0,n.useState)(""),[h,v]=(0,n.useState)(""),{modalCooment:_,news:w}=(0,m.C)((e=>e.reducer.news)),{setNews:g,setModalNews:j}=l.newsSlice.actions,C=(0,m.T)();(0,N.s0)();return{fileload:e=>{let t=new FileReader;t.readAsDataURL(e.target.files[0]),d(e.target.files[0]),t.onloadend=()=>{s(t.result),a(e.target.files[0].name),r(!0)}},clearFile:()=>{console.log("6666"),r(!1),s(null),a(null),d(null)},sendNews:()=>{if(""!==h&&""!==u&&null!==o){const e=new FormData;e.append("title",h),e.append("text",u),e.append("image",o),(async e=>{const{data:s}=await i.y.post("news",e);return s})(e).then((e=>{v(""),x(""),d(null),s(null),r(!1),C(g([...w,e])),C(j(!1))}))}else alert("\u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0434\u0430\u043d\u043d\u044b\u0445")},fileImage:e,fileName:t,fileDiv:c,text:u,title:h,settext:x,settitle:v}};var C=t(7788);const p=()=>{const{modalNews:e}=(0,m.C)((e=>e.reducer.news)),{setModalNews:s}=l.newsSlice.actions,t=(0,m.T)(),a=(0,n.useRef)(null),{title:i,text:c,fileload:o,fileName:d,fileDiv:u,fileImage:x,clearFile:v,sendNews:_,settext:N,settitle:p}=j();return(0,r.jsx)(w.u,{active:e,setActive:e=>t(s(e)),modalClass:"raiting",children:(0,r.jsxs)("div",{className:"RaitingModal",children:[(0,r.jsx)("div",{className:"RaitingModal__top",children:(0,r.jsx)(g.Z,{value:i,change:p,inputClass:"registration gv",placeholder:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a   *"})}),(0,r.jsx)("div",{className:"RaitingModal__text",children:(0,r.jsx)(C.Z,{value:c,setValue:e=>N(e),placeholder:"\u0442\u0435\u043a\u0441\u0442",className:"RaitingModal__textarea"})}),(0,r.jsxs)("div",{className:"RaitingModal__images",children:[(0,r.jsxs)("div",{className:"RaitingModal__label",children:[(0,r.jsx)("input",{ref:a,onChange:o,type:"file",className:"RaitingModal__file"}),(0,r.jsx)("div",{className:"RaitingModal__l",children:(0,r.jsxs)(h.Z,{onClick:()=>{var e;null===(e=a.current)||void 0===e||e.click()},className:"buttonCart",children:[d?"".concat(d):"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"," "]})})]}),(0,r.jsx)("div",{className:u?"RaitingModal__imageCover active ":"RaitingModal__imageCover ",children:(0,r.jsxs)("div",{className:"RaitingModal__image",children:[(0,r.jsx)("span",{onClick:v,className:"icon-clear _icon-delete"}),(0,r.jsx)("img",{src:x,alt:""})]})})]}),(0,r.jsx)("div",{className:"RaitingModal__button",children:(0,r.jsx)(h.Z,{onClick:_,className:"buttonCart",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})})]})})},f=()=>{const{user:e}=(0,m.C)((e=>e.reducer.catalog)),{newsId:s,news:t}=(0,m.C)((e=>e.reducer.news)),{setNews:a,setModalCooment:c}=l.newsSlice.actions,[r,o]=(0,n.useState)(e.name),[d,u]=(0,n.useState)(e.sername),[x,h]=(0,n.useState)(""),v=((0,N.s0)(),(0,m.T)());return{setname:o,setsername:u,settextComment:h,addCommentToNews:()=>{""!==r&&""!==d&&""!==x?(async e=>{const{data:s}=await i.y.post("news/addComment",e);return s})({name:r,sername:d,text:x,news:s}).then((e=>{console.log(e);let n=[...t];console.log(n),n=n.map((t=>{if(t._id===s){const s=JSON.parse(JSON.stringify(t));return console.log(t.comments),s.comments.push(e),s}return t})),v(a(n)),v(c(!1))})):alert("\u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0434\u0430\u043d\u043d\u044b\u0445")},sername:d,textComment:x,name:r}},M=()=>{const{modalCooment:e}=(0,m.C)((e=>e.reducer.news)),{setModalCooment:s}=l.newsSlice.actions,t=(0,m.T)(),{addCommentToNews:a,setname:n,setsername:i,settextComment:c,sername:o,textComment:d,name:u}=f();return(0,r.jsx)(w.u,{active:e,setActive:e=>t(s(e)),modalClass:"raiting",children:(0,r.jsxs)("div",{className:"RaitingModal",children:[(0,r.jsxs)("div",{className:"RaitingModal__top",children:[(0,r.jsx)(g.Z,{value:u,change:n,inputClass:"registration gv",placeholder:"\u0418\u043c\u044f  *"}),(0,r.jsx)(g.Z,{value:o,change:i,inputClass:"registration gv",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f  *"})]}),(0,r.jsx)("div",{className:"RaitingModal__text",children:(0,r.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),placeholder:"\u043e\u0442\u0437\u044b\u0432",className:"RaitingModal__textarea",children:d})}),(0,r.jsx)("div",{className:"RaitingModal__button",children:(0,r.jsx)(h.Z,{onClick:a,className:"buttonCart",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})})]})})};var R=t(847);const y=()=>{const{setModalNews:e}=l.newsSlice.actions,s=(0,m.T)();return(0,r.jsxs)("div",{className:"News",children:[(0,r.jsxs)("div",{className:"News__container",children:[(0,r.jsx)(R.Z,{navigationClass:"news",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f / \u041d\u043e\u0432\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"}),(0,r.jsxs)("div",{className:"News__title",children:[(0,r.jsx)("span",{children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"})," \u041a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"]}),(0,r.jsx)("div",{className:"News__button",children:(0,r.jsx)(h.Z,{onClick:()=>s(e(!0)),className:"buttonCart",children:"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"})}),(0,r.jsx)(_,{})]}),(0,r.jsx)(p,{}),(0,r.jsx)(M,{})]})},S=()=>(0,r.jsx)(a.Z,{children:(0,r.jsx)(y,{})})}}]);
//# sourceMappingURL=357.8335cbc1.chunk.js.map