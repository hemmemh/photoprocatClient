"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[869],{1774:(e,c,t)=>{t.d(c,{Z:()=>a});var s=t(2791),r=t(184);const a=e=>{let{value:c,foldActive:t=(()=>{}),foldChange:a=(()=>{}),children:i,slice:o=1,foldClass:n="origin"}=e;const l=(0,s.useRef)(null);(0,s.useEffect)((()=>{const e=[].slice.call(l.current.children);if(console.log(e.length,"pppp"),l.current&&e.length>o&&!c){e.slice(o,e.length).forEach((e=>{e.style.display="none"}));let c=0;e.slice(0,o).forEach((e=>{c+=e.offsetHeight})),l.current.style.height="".concat(c,"px")}else t(!1)}),[]),(0,s.useEffect)((()=>{const e=[].slice.call(l.current.children);if(l.current&&e.length>o)if(c){let c=0;console.log(l.current,"ty"),e.slice(0,o).forEach((e=>{c+=e.offsetHeight})),l.current.style.height="".concat(c,"px"),e.slice(o,e.length).forEach((e=>{e.style.display="inherit"})),l.current.style.height="".concat(l.current.scrollHeight,"px"),setTimeout((()=>{l.current&&(l.current.style.height="auto")}),300)}else{let c=0;l.current.style.height="".concat(l.current.scrollHeight,"px"),e.slice(0,o).forEach((e=>{c+=e.offsetHeight})),l.current.style.height="".concat(c,"px"),setTimeout((()=>{e.slice(o,e.length).forEach((e=>{e.style.display="none"})),l.current&&(l.current.style.height="auto")}),300)}}),[c]);return(0,r.jsx)("div",{className:"Fold ".concat(n),children:(0,r.jsx)("div",{ref:l,className:"Fold__body",children:i.slice(0,i.length).map(((e,c)=>(0,r.jsx)("div",{className:"Fold__item",children:e},c)))})})}},847:(e,c,t)=>{t.d(c,{Z:()=>r});t(2791);var s=t(184);const r=e=>{let{children:c,navigationClass:t="origin"}=e;return(0,s.jsx)("div",{className:"Navigation ".concat(t),children:c})}},3791:(e,c,t)=>{t.r(c),t.d(c,{default:()=>I});t(4676),t(4831),t(4432),t(3100);var s=t(5338),r=t(2791),a=t(4122),i=t(8028),o=t(8770),n=t(6898),l=t(9934),m=t(9179);const p=()=>async e=>{const c=m.h.getState(),{user:t,compare:s}=c.reducer.catalog,{activeType:r}=c.reducer.compare,a=l.navbarSlice.actions,{setCompareTypes:p,setActiveType:d,setInformations:u,setActiveTypeLoad:h}=n.compareSlice.actions,{setCompare:_}=o.catalogSlice.actions;try{(0,i.iL)({type:r,compareId:t.compare}).then((c=>{e(a.setCompare(c.compareItems.length)),e(_(c.compareItems)),e(h(!1))}))}catch(v){console.log(v)}};var d=t(184);const u=()=>{const e=(0,a.T)();return(0,d.jsxs)("div",{className:"main-compare__top-left",children:[(0,d.jsx)("div",{onClick:()=>e(p()),className:"main-compare__clear _icon-delete",children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}),(0,d.jsx)("div",{className:"main-compare__item",children:"\u041c\u043e\u0434\u0435\u043b\u044c \u0424\u043e\u0442\u043e\u0430\u043f\u043f\u0430\u0440\u0430\u0442\u0430"})]})};var h=t(6899),_=t(794),v=t(8079);const f={786:{spaceBetween:55,slidesPerView:3},982:{spaceBetween:50,slidesPerView:4},1213:{slidesPerView:4,spaceBetween:118}},g=e=>{let{setFirstSwiper:c,secondSwiper:t}=e;const{activeType:s}=(0,a.C)((e=>e.reducer.compare)),{user:r,compare:n}=(0,a.C)((e=>e.reducer.catalog)),p=(0,a.T)();return(0,d.jsx)("div",{className:"main-compare__top-slider",children:(0,d.jsx)("div",{className:"main-compare__top-slider-cover",children:(0,d.jsx)(_.tq,{slidesPerView:2,spaceBetween:0,className:"swiperCompare",modules:[h.Qr],onSwiper:e=>c(e),controller:{control:t},breakpoints:f,children:n.map((e=>{if(e.product.type.name===s)return(0,d.jsx)(_.o5,{children:(0,d.jsxs)("div",{className:"swiperCompare__item item-swiperCompare",children:[(0,d.jsx)("div",{className:"item-swiperCompare__image-cover",children:(0,d.jsx)("div",{className:"item-swiperCompare__image",children:(0,d.jsx)("img",{src:"".concat(v.T5,"/").concat(e.product.name,"/").concat(JSON.parse(e.product.images)[0]),alt:""})})}),(0,d.jsx)("div",{onClick:()=>{return p((c=e.product._id,t=r.compare,async e=>{const s=m.h.getState(),{compare:r}=s.reducer.catalog,a=s.reducer.navbar,{setCompare:n}=o.catalogSlice.actions,p=l.navbarSlice.actions;try{e(n([...r.filter((e=>e.product._id!==c))])),e(p.setCompare(a.compare-1)),(0,i.dH)({id:c,compareId:t}).then((e=>{console.log(e)}))}catch(d){console.log(d)}}));var c,t},className:"item-swiperCompare__delete"}),(0,d.jsx)("div",{className:"item-swiperCompare__name",children:e.product.name}),(0,d.jsx)("div",{className:"item-swiperCompare__brand",children:e.product.brand.name})]})},e._id)}))})})})},x=e=>{let{setFirstSwiper:c,secondSwiper:t}=e;return(0,d.jsxs)("div",{className:"main-compare__top",children:[(0,d.jsx)(u,{}),(0,d.jsx)(g,{setFirstSwiper:c,secondSwiper:t})]})};var j=t(1774);const y=e=>{let{setSecondSwiper:c,firstSwiper:t}=e;const{compare:s}=(0,a.C)((e=>e.reducer.catalog)),{activeType:r,fold:i,informations:o}=(0,a.C)((e=>e.reducer.compare)),{setFold:l}=n.compareSlice.actions,m=(0,a.T)();return(0,d.jsxs)("div",{className:"main-compare__bottom",children:[(0,d.jsx)("div",{className:"main-compare__bottom-left",children:(0,d.jsx)(j.Z,{value:i,foldChange:e=>m(l(e)),slice:2,children:o.map((e=>(0,d.jsx)("div",{className:"main-compare__bottom-left__item",children:e.name},e._id)))})}),(0,d.jsx)("div",{className:"item-swiperCompare__bottom-right",children:(0,d.jsx)(_.tq,{slidesPerView:2,className:"swiperCompare2",spaceBetween:9,modules:[h.Qr],onSwiper:e=>c(e),controller:{control:t},breakpoints:{786:{spaceBetween:55,slidesPerView:3},982:{spaceBetween:55,slidesPerView:4},1213:{slidesPerView:4,spaceBetween:120}},children:s.map((e=>{if(e.product.type.name===r)return(0,d.jsx)(_.o5,{children:(0,d.jsx)("div",{className:"swiperCompare2__item item-swiperCompare2",children:(0,d.jsx)(j.Z,{foldClass:"ggg",value:i,foldChange:e=>m(l(e)),slice:2,children:e.product.information.map((e=>(0,d.jsx)("div",{className:"item-swiperCompare2__item",children:e.description},e.description)))})})},e._id)}))})})]})};var C=t(4297);const w=()=>{const{fold:e}=(0,a.C)((e=>e.reducer.compare)),{setFold:c}=n.compareSlice.actions,t=(0,a.T)();return(0,d.jsx)("div",{className:"main-compare__button",children:(0,d.jsx)(C.Z,{onClick:()=>t(c(!e)),className:"compare g",children:e?"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"})})},N=e=>{let{actionRef:c,actionRef2:t,setitemsView:s}=e;(0,r.useEffect)((()=>(document.addEventListener("click",a),()=>{document.removeEventListener("click",a)})),[]);const a=(0,r.useCallback)((e=>{c.current&&t.current&&(t.current.contains(e.target)||e.target===c.current||s(!1))}),[])},S=()=>{const{activeType:e,compareTypes:c}=(0,a.C)((e=>e.reducer.compare)),{compare:t}=(0,a.C)((e=>e.reducer.catalog)),s=(0,a.T)(),i=(0,r.useRef)(null),o=(0,r.useRef)(null),[l,u]=(0,r.useState)(!1);return N({actionRef:i,actionRef2:o,setitemsView:u}),(0,d.jsxs)("div",{className:"Compare__items items-compare",children:[(0,d.jsx)("div",{ref:o,className:"items-compare__cover",onClick:()=>u((e=>!e)),children:(0,d.jsxs)("div",{className:l?"items-compare__action active":"items-compare__action",children:[" ",(0,d.jsx)("span",{})]})}),(0,d.jsx)("div",{onClick:()=>s(p()),className:"items-compare__delete _icon-delete"}),(0,d.jsx)("div",{ref:i,className:l?"items-compare__body active":"items-compare__body",children:c.map((c=>(0,d.jsxs)("div",{onClick:()=>s((e=>async c=>{const t=m.h.getState(),{compare:s}=t.reducer.catalog,{setActiveType:r,setInformations:a}=n.compareSlice.actions;c(r(e));const i=s.find((c=>c.product.type.name===e));i&&c(a(i.product.information))})(c)),className:e===c?"items-compare__item active":"items-compare__item",children:[c," (",t.filter((e=>e.product.type.name===c)).length,")"]},c)))})]})},T=()=>{const{user:e,compare:c}=(0,a.C)((e=>e.reducer.catalog)),[t,s]=(0,r.useState)(null),[i,o]=(0,r.useState)(null);return(0,d.jsxs)("div",{className:"Compare__topic",children:[(0,d.jsxs)("div",{className:"Compare__title",children:["\u0421\u0420\u0410\u0412\u041d\u0418\u0422\u042c ",(0,d.jsxs)("span",{children:[c.length," \u0422\u041e\u0412\u0410\u0420\u041e\u0412"]})]}),(0,d.jsx)(S,{}),(0,d.jsxs)("div",{className:"Compare__main main-compare",children:[(0,d.jsx)(x,{setFirstSwiper:s,secondSwiper:i}),(0,d.jsx)(y,{setSecondSwiper:o,firstSwiper:t}),(0,d.jsx)(w,{})]})]})};var b=t(847),k=t(77);const E=()=>{const{compare:e}=(0,a.C)((e=>e.reducer.catalog)),{activeType:c,load:t}=(0,a.C)((e=>e.reducer.compare)),{setActiveTypeLoad:s}=n.compareSlice.actions,p=(0,a.T)(),[u,h]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{p((async e=>{const c=m.h.getState(),{user:t}=c.reducer.catalog,{load:s}=c.reducer.compare,{sumPrice:r,products:a}=c.reducer.basket,{setProducts:p}=l.navbarSlice.actions,{setCompareTypes:d,setActiveType:u,setInformations:h,setLoad:_}=n.compareSlice.actions,{setCompare:v}=o.catalogSlice.actions;try{e(_(!0));const c=await(0,i._$)({id:t.compare});e(v(c.compareItems));const s=[];c.compareItems.forEach((t=>{s.includes(t.product.type.name)||s.push(t.product.type.name),e(d(s)),e(u(s[0])),e(h(c.compareItems.find((e=>e.product.type.name===s[0])).product.information))}))}catch(f){console.log(f)}finally{e(_(!1))}}))}),[]),(0,r.useEffect)((()=>{p((async e=>{const c=m.h.getState(),{user:t,compare:s}=c.reducer.catalog,{activeType:r}=c.reducer.compare,{setProducts:a}=l.navbarSlice.actions,{setCompareTypes:i,setActiveType:p,setInformations:d,setActiveTypeLoad:u}=n.compareSlice.actions,{setCompare:h}=o.catalogSlice.actions;try{e(u(!1));const c=[];if(s.forEach((e=>{c.includes(e.product.type.name)||c.push(e.product.type.name)})),e(i(c)),0===c.length)e(p("\u0422\u0438\u043f\u044b"));else if(!s.find((e=>e.product.type.name===r))){e(p(c[0]));const t=s.find((e=>e.product.type.name===c[0]));t&&e(d(t.product.information))}}catch(_){console.log(_)}}))}),[e]),(0,r.useEffect)((()=>{"\u0422\u0438\u043f\u044b"!==c&&p(s(!0))}),[c]),(0,d.jsx)("div",{className:"Compare",children:(0,d.jsx)("div",{className:"Compare__container",children:(0,d.jsxs)("div",{className:"Compare__body",children:[(0,d.jsx)(b.Z,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f / \u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"}),t?(0,d.jsx)(k.Z,{}):e&&0!==e.length?(0,d.jsx)(T,{}):(0,d.jsx)("div",{className:"Compare__none _icon-compare",children:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b \u0442\u043e\u0432\u0430\u0440\u044b"})]})})})},I=()=>(0,d.jsx)(s.Z,{children:(0,d.jsx)(E,{})})},4831:()=>{},3100:()=>{}}]);
//# sourceMappingURL=869.6dc133dd.chunk.js.map